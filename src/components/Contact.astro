---
import {
  Mail,
  Phone,
  MapPin,
  Send,
  MessageCircle,
  Calendar,
  Download,
  Linkedin,
  Github,
} from "lucide-astro";
---

<!-- src/components/Contact.astro -->
<section
  id="contact"
  class="py-20 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-blue-900"
>
  <div class="container mx-auto px-6">
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2
        class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4"
      >
        ¡Hablemos!
      </h2>
      <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
        ¿Tienes un proyecto en mente? ¿Buscas un desarrollador Angular? Estoy
        disponible para nuevas oportunidades y colaboraciones.
      </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto">
      <!-- Contact Information -->
      <div class="space-y-8">
        <!-- Contact Intro -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg">
          <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
            Información de Contacto
          </h3>
          <p class="text-gray-600 dark:text-gray-400 mb-6">
            Siempre estoy interesado en nuevos proyectos y oportunidades. No
            dudes en contactarme a través de cualquiera de estos medios.
          </p>

          <!-- Contact Methods -->
          <div class="space-y-4">
            <!-- Email -->
            <a
              href="mailto:adrian.cornejo0105@gmail.com"
              class="flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors group"
            >
              <div
                class="flex-shrink-0 w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center group-hover:bg-red-200 dark:group-hover:bg-red-900/50 transition-colors"
              >
                <Mail class="w-6 h-6 text-red-600 dark:text-red-400" />
              </div>
              <div class="ml-4">
                <h4 class="font-semibold text-gray-900 dark:text-white">
                  Email
                </h4>
                <p class="text-gray-600 dark:text-gray-400">
                  adrian.cornejo0105@gmail.com
                </p>
              </div>
            </a>

            <!-- Phone -->
            <a
              href="tel:+527711204655"
              class="flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl hover:bg-green-50 dark:hover:bg-green-900/30 transition-colors group"
            >
              <div
                class="flex-shrink-0 w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center group-hover:bg-green-200 dark:group-hover:bg-green-900/50 transition-colors"
              >
                <Phone class="w-6 h-6 text-green-600 dark:text-green-400" />
              </div>
              <div class="ml-4">
                <h4 class="font-semibold text-gray-900 dark:text-white">
                  Teléfono
                </h4>
                <p class="text-gray-600 dark:text-gray-400">+52 771 120 4655</p>
              </div>
            </a>

            <!-- Location -->
            <div
              class="flex items-center p-4 bg-gray-50 dark:bg-gray-700 rounded-xl"
            >
              <div
                class="flex-shrink-0 w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"
              >
                <MapPin class="w-6 h-6 text-blue-600 dark:text-blue-400" />
              </div>
              <div class="ml-4">
                <h4 class="font-semibold text-gray-900 dark:text-white">
                  Ubicación
                </h4>
                <p class="text-gray-600 dark:text-gray-400">
                  Pachuca, Hidalgo, México
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg">
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6">
            Acciones Rápidas
          </h3>

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <!-- Download CV -->
            <a
              href="/resume.pdf"
              target="_blank"
              class="flex items-center justify-center p-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors font-medium"
            >
              <Download class="w-5 h-5 mr-2" />
              Descargar CV
            </a>

            <!-- Schedule Meeting -->
            <a
              href="https://calendly.com/adrian-garcia"
              target="_blank"
              class="flex items-center justify-center p-4 border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white rounded-xl transition-colors font-medium"
            >
              <Calendar class="w-5 h-5 mr-2" />
              Agendar Reunión
            </a>
          </div>

          <!-- Social Links -->
          <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-600">
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
              También puedes encontrarme en:
            </p>
            <div class="flex space-x-4">
              <a
                href="https://www.linkedin.com/in/adrian-de-jesus-garcia-cornejo-891066324"
                target="_blank"
                rel="noopener noreferrer"
                class="p-3 bg-blue-100 dark:bg-blue-900/30 hover:bg-blue-200 dark:hover:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-xl transition-colors"
                aria-label="LinkedIn"
              >
                <Linkedin class="w-6 h-6" />
              </a>
              <a
                href="https://github.com/adriangarcia"
                target="_blank"
                rel="noopener noreferrer"
                class="p-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-xl transition-colors"
                aria-label="GitHub"
              >
                <Github class="w-6 h-6" />
              </a>
            </div>
          </div>
        </div>

        <!-- Availability Status -->
        <div
          class="bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-6 text-white"
        >
          <div class="flex items-center mb-2">
            <div class="w-3 h-3 bg-white rounded-full mr-3 animate-pulse"></div>
            <span class="font-semibold">Disponible para nuevos proyectos</span>
          </div>
          <p class="text-green-100">
            Actualmente acepto proyectos para desarrollo Angular y consultoría
            técnica.
          </p>
        </div>
      </div>

      <!-- Contact Form -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg">
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
          Envíame un mensaje
        </h3>

        <form id="contact-form" class="space-y-6">
          <!-- Name -->
          <div>
            <label
              for="name"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              Nombre completo *
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"
              placeholder="Tu nombre completo"
            />
          </div>

          <!-- Email -->
          <div>
            <label
              for="email"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              Email *
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"
              placeholder="tu@email.com"
            />
          </div>

          <!-- Subject -->
          <div>
            <label
              for="subject"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              Asunto *
            </label>
            <select
              id="subject"
              name="subject"
              required
              class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"
            >
              <option value="">Selecciona un tema</option>
              <option value="freelance">Proyecto Freelance</option>
              <option value="job">Oportunidad Laboral</option>
              <option value="collaboration">Colaboración</option>
              <option value="consultation">Consultoría Técnica</option>
              <option value="other">Otro</option>
            </select>
          </div>

          <!-- Budget (optional) -->
          <div>
            <label
              for="budget"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              Presupuesto estimado (opcional)
            </label>
            <select
              id="budget"
              name="budget"
              class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors"
            >
              <option value="">No especificado</option>
              <option value="under-5k">Menos de $5,000 USD</option>
              <option value="5k-10k">$5,000 - $10,000 USD</option>
              <option value="10k-25k">$10,000 - $25,000 USD</option>
              <option value="25k-plus">Más de $25,000 USD</option>
            </select>
          </div>

          <!-- Message -->
          <div>
            <label
              for="message"
              class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
            >
              Mensaje *
            </label>
            <textarea
              id="message"
              name="message"
              rows="5"
              required
              class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white transition-colors resize-vertical"
              placeholder="Cuéntame sobre tu proyecto o necesidades..."
            ></textarea>
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="w-full flex items-center justify-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"
          >
            <Send class="w-5 h-5 mr-2" />
            Enviar mensaje
          </button>
        </form>

        <!-- Form Status -->
        <div id="form-status" class="mt-4 hidden">
          <div
            id="success-message"
            class="p-4 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg hidden"
          >
            <p class="font-medium">¡Mensaje enviado correctamente!</p>
            <p class="text-sm">Te responderé lo antes posible.</p>
          </div>
          <div
            id="error-message"
            class="p-4 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 rounded-lg hidden"
          >
            <p class="font-medium">Error al enviar el mensaje</p>
            <p class="text-sm">
              Por favor, intenta nuevamente o contáctame directamente.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Call to Action -->
    <div class="text-center mt-16">
      <div
        class="bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg max-w-3xl mx-auto"
      >
        <MessageCircle class="w-16 h-16 text-blue-500 mx-auto mb-4" />
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
          ¿Listo para empezar?
        </h3>
        <p class="text-gray-600 dark:text-gray-400 mb-6">
          Ya sea un proyecto nuevo, una consultoría técnica o una oportunidad
          laboral, estoy aquí para ayudarte a hacer realidad tus ideas.
        </p>
        <a
          href="mailto:adrian.cornejo0105@gmail.com?subject=Nuevo%20Proyecto&body=Hola%20Adrián,%0D%0A%0D%0AMe%20interesa%20contactarte%20para..."
          class="inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold rounded-lg transition-all duration-300 transform hover:scale-105"
        >
          <Mail class="w-5 h-5 mr-2" />
          Enviar email directo
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  // Contact form handling
  const contactForm = document.getElementById("contact-form");
  const formStatus = document.getElementById("form-status");
  const successMessage = document.getElementById("success-message");
  const errorMessage = document.getElementById("error-message");

  contactForm?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(contactForm as HTMLFormElement);
    const data = Object.fromEntries(formData);

    // Show loading state
    const submitButton = contactForm.querySelector(
      'button[type="submit"]'
    ) as HTMLButtonElement;
    const originalText = submitButton.innerHTML;
    submitButton.innerHTML =
      '<div class="animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"></div>Enviando...';
    submitButton.disabled = true;

    try {
      // Here you would integrate with your preferred form service
      // For now, we'll simulate the form submission
      await new Promise((resolve) => setTimeout(resolve, 2000));

      // Show success message
      formStatus?.classList.remove("hidden");
      successMessage?.classList.remove("hidden");
      errorMessage?.classList.add("hidden");

      // Reset form
      (contactForm as HTMLFormElement).reset();

      // Optional: Send to email service like Netlify Forms, Formspree, etc.
      // Example with Formspree:
      /*
      const response = await fetch('https://formspree.io/f/YOUR_FORM_ID', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
      });
      
      if (response.ok) {
        // Success handling
      } else {
        throw new Error('Form submission failed');
      }
      */
    } catch (error) {
      // Show error message
      formStatus?.classList.remove("hidden");
      errorMessage?.classList.remove("hidden");
      successMessage?.classList.add("hidden");
    } finally {
      // Reset button
      submitButton.innerHTML = originalText;
      submitButton.disabled = false;
    }
  });

  // Auto-hide status messages after 5 seconds
  setTimeout(() => {
    formStatus?.classList.add("hidden");
  }, 5000);
</script>
