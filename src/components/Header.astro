---
import { Menu, X, Github, Linkedin, Mail } from "lucide-astro";
---

<header
  class="fixed top-0 left-0 right-0 z-50 bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700"
>
  <nav class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo/Brand -->
      <a
        href="/"
        class="flex items-center space-x-2 font-bold text-xl text-gray-900 dark:text-white no-underline"
      >
        <div
          class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center"
        >
          <span class="text-white font-bold text-sm">AC</span>
        </div>
        <span class="hidden sm:block">Adrián Cornejo</span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-8">
        <a
          href="#about"
          class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors no-underline"
        >
          Sobre mí
        </a>
        <a
          href="#skills"
          class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors no-underline"
        >
          Habilidades
        </a>
        <a
          href="#projects"
          class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors no-underline"
        >
          Proyectos
        </a>
        <a
          href="#contact"
          class="nav-link text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors no-underline"
        >
          Contacto
        </a>

        <!-- Social Links -->
        <div
          class="flex items-center space-x-4 ml-4 pl-4 border-l border-gray-300 dark:border-gray-600"
        >
          <a
            href="https://github.com/Adrian-Cornejo"
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors"
            aria-label="GitHub"
          >
            <Github class="w-5 h-5" />
          </a>
          <a
            href="https://www.linkedin.com/in/adrian-de-jesus-garcia-cornejo-891066324"
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
            aria-label="LinkedIn"
          >
            <Linkedin class="w-5 h-5" />
          </a>
          <a
            href="mailto:adrian.cornejo0105@gmail.com"
            class="text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors"
            aria-label="Email"
          >
            <Mail class="w-5 h-5" />
          </a>
        </div>

        <!-- Theme Toggle -->
        <!-- <button
          id="theme-toggle"
          class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          aria-label="Toggle theme"
        >
          <svg
            class="w-5 h-5 hidden dark:block"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
              clip-rule="evenodd"></path>
          </svg>
          <svg
            class="w-5 h-5 block dark:hidden"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
            ></path>
          </svg>
        </button> -->
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
        aria-label="Toggle mobile menu"
      >
        <Menu class="w-6 h-6" id="menu-open" />
        <X class="w-6 h-6 hidden" id="menu-close" />
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div
      id="mobile-menu"
      class="hidden md:hidden mt-4 pb-4 border-t border-gray-200 dark:border-gray-700"
    >
      <div class="flex flex-col space-y-4 pt-4">
        <a
          href="#about"
          class="nav-link-mobile text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors no-underline"
        >
          Sobre mí
        </a>
        <a
          href="#skills"
          class="nav-link-mobile text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors no-underline"
        >
          Habilidades
        </a>
        <a
          href="#projects"
          class="nav-link-mobile text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors no-underline"
        >
          Proyectos
        </a>
        <a
          href="#contact"
          class="nav-link-mobile text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors no-underline"
        >
          Contacto
        </a>

        <!-- Mobile Social Links -->
        <div
          class="flex items-center space-x-6 pt-4 border-t border-gray-200 dark:border-gray-600"
        >
          <a
            href="https://github.com/Adrian-Cornejo"
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors"
          >
            <Github class="w-6 h-6" />
          </a>
          <a
            href="https://www.linkedin.com/in/adrian-de-jesus-garcia-cornejo-891066324"
            target="_blank"
            rel="noopener noreferrer"
            class="text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
          >
            <Linkedin class="w-6 h-6" />
          </a>
          <a
            href="mailto:adrian.cornejo0105@gmail.com"
            class="text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors"
          >
            <Mail class="w-6 h-6" />
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<script>
  // Mobile menu toggle
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuOpen = document.getElementById("menu-open");
  const menuClose = document.getElementById("menu-close");

  mobileMenuButton?.addEventListener("click", () => {
    mobileMenu?.classList.toggle("hidden");
    menuOpen?.classList.toggle("hidden");
    menuClose?.classList.toggle("hidden");
  });

  // Close mobile menu when clicking on links
  document.querySelectorAll(".nav-link-mobile").forEach((link) => {
    link.addEventListener("click", () => {
      mobileMenu?.classList.add("hidden");
      menuOpen?.classList.remove("hidden");
      menuClose?.classList.add("hidden");
    });
  });

  // Theme toggle
  const themeToggle = document.getElementById("theme-toggle");

  themeToggle?.addEventListener("click", () => {
    document.documentElement.classList.toggle("dark");
    localStorage.setItem(
      "theme",
      document.documentElement.classList.contains("dark") ? "dark" : "light"
    );
  });

  // Set initial theme
  if (
    localStorage.getItem("theme") === "dark" ||
    (!localStorage.getItem("theme") &&
      window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    document.documentElement.classList.add("dark");
  }

  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", (e) => {
      e.preventDefault();
      const href = (e.currentTarget as HTMLAnchorElement).getAttribute("href");
      const target = href ? document.querySelector(href) : null;
      if (target) {
        target.scrollIntoView({
          behavior: "smooth",
          block: "start",
        });
      }
    });
  });
</script>

<style>
  header {
    transition: transform 0.3s ease;
  }

  .nav-link {
    position: relative;
  }

  .nav-link::after {
    content: "";
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -4px;
    left: 0;
    background-color: currentColor;
    transition: width 0.3s ease;
  }

  .nav-link:hover::after {
    width: 100%;
  }
</style>
